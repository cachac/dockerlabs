server {
	listen PORT;
	server_name doctores.ministeriodesalud.go.cr;
	client_max_body_size 512M;
	access_log off;


  # gzip
  gzip on;
  gzip_min_length 10240;
  gzip_comp_level 1;
  gzip_vary on;
  gzip_disable msie6;
  gzip_proxied expired no-cache no-store private auth;
  gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml;

  # micro cache
  proxy_cache micro_cache;
  proxy_cache_valid any 1s;
  proxy_cache_lock on;
  proxy_cache_background_update on;
  proxy_cache_use_stale updating;

  location /nginx_status {
    stub_status;
  }

	location / {
		# micro cache
    proxy_http_version 1.1;
    proxy_set_header Connection "";
    proxy_set_header Host $host;
    proxy_ignore_headers Cache-Control Expires;

		proxy_pass http://internal-lb-private-2122374664.us-east-1.elb.amazonaws.com;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto $scheme;
	}
}
